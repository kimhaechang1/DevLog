# Oct. 26. 2022 commit

적용 프로젝트 : [bePro](https://github.com/kimhaechang1/bePro)

작성 날짜 : Nov. 23. 2022

## 개발 내용
> ### 로그인 로직 구현
> #### 서버와 통신하기 위한 프론트 내부 로직 구현
>
> **로그인 진행순서**
> 
> 1. 사용자가 입력한 값을 ```axiosLoginData()```를 통해 서버로 전송    
> 2. 서버에서는 DB와 값을 비교하여 로그인 성공여부 결정
> 3. 로그인에 성공했을 경우 서버에서 jwt token 생성 후 DB에 토큰 저장
> 4. 서버에서 응답데이터로 로그인 성공/실패여부(true or false), 로그인 관련 메시지, 닉네임, 토큰값을 보냄
> 5. 프론트단에서 서버에서 받은 응답데이터를 통해 로그인에 성공했을 경우 로컬스토리지에 토큰값, 닉네임 저장
> 
> **axios 모듈 추가**
> 
> **axiosLoginData()**
>
> 인자로 전달받은 아이디와 패스워드를 ```axios.post```를 통해 서버로 전송    
> 
> 응답 객체를 확인하여 미리 만들어둔 ```request``` 객체에 값 맵핑 후 ```return```시킴
> 
> 현재 서버에서 데이터를 받을 준비가 안되었으므로 프론트단에서 테스트 하기 위해 
> 
> if문을 통한 간단한 아이디 비번 검증 후 ```request``` 객체를 ```return``` 시킴
>
> 추가적으로 앞으로의 프론트 통신에 필요한 함수는 ```axios``` 폴더에서 보관
>
> **SignIn.js**
> 
> 저번에 ~~까먹고~~ 안만들어준 ```submit```버튼 추가   
> 
> 사용자의 입력값을 저장하기 위해 ```useState``` 사용
>
> ```onSubmit``` 이벤트를 통해 ```axiosLoginData```를 호출 할 것이므로 ```<input>```부분을 ```<form>```태그로 감싸줌
> 
> ```onSubmit``` 이벤트 헨들러 함수 ```onSubmitHandler```를 정의
> 
> > ```onSubmitHandler```함수
> >
> > ```useState```로 보관되어 있는 입력값을 ```object```형태로 변환
> >
> > 객체 형태의 값을 ```axiosLoginData```에 인자로 넣어줌
>
> 정상적으로 ```axios```모듈을 통해 ```return```되어지는 값은 프러미스 객체 일 것이지만
>
> 현재로서는 프론트단 내부에서 테스트 하므로 일반 객체가 올 것임을 예상하여 로그인 여부에 따른 if문 추가
>
> 로그인에 성공했을 시 로컬 스토리지에 ```token```이라는 이름으로 임시 생성한 토큰값과 닉네임 저장
> 
> **Header.js**
> 
> 로그인 성공여부에 따른 상단바의 메뉴 상태가 달라져야함
>
> + 로그인에 성공했을 시 : SignOut과 마이페이지가 있어야함
> + 로그인에 실패했을 시 : SignIn 과 SignUp이 있어야함
> 
> 이 두가지 상황을 모두 ```UI```라는 객체 변수에 저장
> 
> 그리고 초기 상단바를 렌더링 한 후 로컬스토리지에 ```key : token```으로된 값이 있으면 로그인 된 상태로 간주
>
> 이를 구현하기 위해 ```useEffect``` 사용
>
> > ```useEffect```
> > 로그인 된 상태라면 로컬스토리지에 있는 값 들을 ```useState```를 통해 저장
  
<br>
 
> ### 자잘한거 고치기
> #### SignUp.js 에서 라디오 버튼 value 값 추가
> 
> 일단 전공자냐 비전공자냐에 따른 value 값이 필요할 것 같아서 1 과 0 으로 정의함

<br>
  
후기

useEffect를 제외하고 더 다양한 react 훅이 있는걸로 봐서는 아무래도 최신 기술을 익혀 나가는것이 중요할 것 같다.
 
그리고 useEffect를 사용하며 아직까지 매끄럽지 못한 부분이나 알맞게 사용하고 있나 싶은데, 이부분에 대한 궁금증도 또한 useEffect를 좀 더 공부해야 한다.
