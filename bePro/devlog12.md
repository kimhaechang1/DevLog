# Nov. 16. 2022 commit

적용 프로젝트 : [bePro](https://github.com/kimhaechang1/bePro)

작성 날짜 : Nov. 29. 2022

## 개발 내용
> ### 쓸데없는 파일 삭제
> 
> 참고자료
>
> [CRA 디폴트 파일 reportWebVitals](https://velog.io/@sunhwa508/reportWebVitals%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%8B%A0%EB%B6%84)
>
> [웹 앱 매니페스트를 작성해보자](https://365kim.tistory.com/169)
> 
> ```create-react-app``` 명령어를 통해 자연스럽게 생성되는 기본 파일들을 제거 해 주었다.
> 
> 제거 한 목록 중 ```reportWebVitals.js``` 와 ```manifest.json```는 
>
> 삭제 해도 되는가를 먼저 검색하고 이해 한 후, 삭제를 진행하였다.
 
<br>

> ### 메인 페이지 Card.js 로직 구현
>
> 참고자료
>
> [Mozilla Date()] (https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Date/Date)
>
> 메인페이지의 Card.js는 현재 ```switch``` 문을 통해
> 
> props로 넘어온 제목에 따라 다르게 랜더링 하도록 되어있다.
>
> 메인페이지의 Card.js 사용목적은
> 
> 최신 QnA, 공지사항, 조회수 높은 순 <- 이 세가지 종류의 글 제목, 조회수, 글쓴날짜를 표시하는것이다.
> 
> 그래서 3가지 각각의 데이터를 ```GET``` 방식을 통해 서버에서 데이터를 들고오고 랜더링 하도록 해야한다.
>
> 여기서 ```Card.js```를 만든 이유가 재사용성인 부분 처럼
>
> ```Card.js```에 사용될 axios 함수가 추가 될 가능성도 생각 하기 위해서
> 
> 여러 axios함수를 object 형식으로 ```Card.js```의 제목에 따라 바인딩 하는 함수를 만들 필요성을 느꼈다.
>
> 따라서 3가지 axios함수가 필요하고 bind용 함수가 하나 필요하다.
>
> **GetGongjiTitle.js, GetQnATitle.js, GetViewTitle.js**
> 
> 위 세가지 함수가 axios 통신을 통해 
> 
> 서로다른 목적을 가진 덩어리 (글제목, 조회수, 글쓴날짜) 를 백엔드로 부터 받아야 한다.
>
> ```GET```방식을 사용 할 것이므로, ```axios.get```을 사용하고
>
> 현재는 백엔드에서 아직 준비가 안됬으므로 임시 데이터를 만들어서
>
> ```.catch```문을 통해 리턴하도록 한다.
>
> **bindCardContent.js** 
> 
> 아까 언급했던 바인딩 함수로서 
> 
> Card.js에서 사용하는 제목을 인자로 넘겨받으면
>
> 목적에 맞는 함수를 리턴시키는 함수이다.
>
> **Card.js**
>
> 이제 바인딩 함수와 각각의 axios 함수들을 완성시켰다.
>
> 이 컴포넌트에서 직접적으로 목적을 구분시킬 필요 없으므로
>
> switch문을 삭제하고 글 제목 및 통신하여 받은 데이터를 저장할 목적인 ```useState```를 만든다
> 
> ```jsx
> const [title, setTitle] = useState(""); // 글제목
> const [contentTitle, setContentTitle] = useState([]); // 통신받은 데이터 저장
> ```
> 그리고 저번에 만들어준 useEffect문 안에서 setTitle을 통해 props로 넘겨받은 제목을 넣어 저장한다.
>
> 그 다음 해당하는 글 제목을 바인드용 함수에 넘겨서 필요한 함수를 받는다.
>
> 마지막엔 늘 하던것 처럼 응답 프로미스 객체를 분석하여
>
> ```setContentTitle```를 사용하여 필요한 데이터를 담는다.
>
> 그리고 return 문에서 map함수를 통해 쭉 리턴해주는데
>
> 그냥 리턴 해버리니깐 글쓴 날짜에서 이상한 값이 나왔었다.
> 
> 그래서 "설마 이거 날짜 값이라 Date생성자로 해야하나" 싶었는데 정답이었다.

<br>

> ### 사이드바 로직 구현
> 
> 저번에 만들어 둔 ```<SideBar>```에 속살을 입힐 시간이다.
>
> 이 사이드바도 위의 ```<Card>```컴포넌트와 마찬가지로
> 
> 사용목적이 다양할 수 있으므로 props로 넘어온 제목에 따라 다르게 작동하도록
>
> 바인드 함수와 axios 함수를 연결하여 사용하였다. 
>
> 그 밖의 작동방식이나 내부 구조는 위의 함수와 동일하다.

<br>

> ### 자동로그인 에러 및 상단바 변경
>
> 저번 회원가입 때 내가만든 기능인데 까먹고 안한 테스트가 있었다.
>
> 우리 홈페이지 회원가입 로직 상 회원가입에 성공 한 계정은 곧바로 로그인이 되어야한다.
>
> 근데 로그인로직까지는 정상적으로 되는데 페이지 리로딩이 안되어
>
> 리랜더링이 되지 못하여 사용자입장에서는 로그인이 되었는지 파악하기 힘든 문제점이 있었다.
>
> 따라서 ```window.location.reload()```를 로그인 로직에 추가하여
>
> 로그인 이후 페이지 리로딩을 시켜주었다.
>
> 또한 회의에서 로그인 후 상단바에 "마이페이지"가 아닌 닉네임을 나타내자 라는 의견이 나와서
>
> 곧바로 상단바에 적용시켜주었다.

<br> 

> ### axios파일들 에러 헨들링
>
> 사이드바와 ```<Card>```컴포넌트를 만들면서 
>  
> 아직 백엔드에서 준비가 안되었을 때 통신부분을 그냥 주석처리 하는거 말고
> 
> 에러헨들링으로 매끄럽게 처리하는게 나을것 같다는 생각으로 로직을 작성하다가
>
> "내가 axios함수에는 에러처리를 해주었나?" 싶었다.
>
> 그래서 검토 해보니 안되있는곳이 많아서 다들 기본적인 에러 헨들링으로 에러구문 ```alert```를 선택했다.
> 
> 임시 에러핸들링으로 추 후 에러 상황에따라 디테일하게 바꿀 것이다.
  
후기
  
처음에 공지사항글이나 그런걸 전부 다르게 서버에서 받아오려고 했다.
 
예를들어 공지사항과 QnA는 글제목이랑 글쓴 날짜, 조회수순은 글제목이랑 글쓴날짜랑 조회수 이런식으로
  
근데 다른 게시판의 예시를 보며 굳이 그렇게 할 필요성을 못느꼇다.

그래서 모두 다 글쓴날짜, 글제목, 조회수를 긁어오도록 만들었다.
  
또한 중계기 역할을 하는 bind 함수 없이 ```<Card>```에서 전부 해결하려 했더니
  
너무 ```<Card>``` 가 무겁고 복잡한 것이었다.

그래서 옛날에 프론트앤드 강의영상에서 역할을 분리하는 부분이 떠올라서 bind함수를 만들었다.

